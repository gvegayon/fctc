/*
 Nielsen SDK package v5.1.0.17 
 (c) 2017 The Nielsen Company 
*/
/* PLDPR build v5.1.0.75-9*/
window.NOLCMB.registerLib("PLDPR",function(a){"use strict";function e(a,e){var t=[],r=a.split("&"),n,o;for(n=0,o=r.length;n<o;n+=1)0!==r[n].indexOf(e)&&t.push(r[n]);return t.join("&")}function t(a){return a<10?"0"+a:""+a}function r(a,e){var r=new Date(1e3*e),n=r.getUTCFullYear().toString(),o=t(r.getUTCMonth()+1),i=t(r.getUTCDate());N({data:a,param:"nol_dayId",val:Qa[r.getUTCDay()]}),N({data:a,param:"nol_hourCode",val:t(r.getUTCHours())}),N({data:a,param:"nol_dataDate",val:n+o+i})}function n(a,e){var t=a.split("||"),r=t[0]||a;if(window)for(var n=0,o=t.length;n<o;n+=1)r=t[n],"undefined"!=typeof window["on"+r]&&(window.addEventListener?window.addEventListener(r,e,!1):window.attachEvent&&window.attachEvent("on"+r,e))}function o(a,e){var t;if("num"==e)t=parseInt(a,10),a=isNaN(t)?0:t;else if("bin"==e)a=isNaN(Number(a))?"0":Number(a).toString(2);else if("bool"==e)switch(a.toString().toLowerCase()){case"false":case"no":case"0":case"":a=!1;break;default:a=!0}else"b2n"==e&&(t=parseInt(a,2),a=isNaN(t)?0:t);return a}function i(a){var e,t=[];for(e=0;e<o(a,"num");e+=1)t.push({tsv:0,save:!1,updated:!1});return t}function s(a){return{tags:[],eventQueue:a&&a.eventQueue?a.eventQueue:[],tagSize:1,bReInit:!1,debug:Ca,eventQueueIndex:0}}function l(a){var t;void 0!==a&&0!==a.length&&(t=window.document.createElement("script"),t.type="text/javascript",t.src=e(a,"rnd=")+"&rnd="+Math.round(1e6*Math.random()),t.onerror=function(a){var e=a.target.src;window.document.head?window.document.head.removeChild(a.target):window.document.getElementsByTagName("head")[0].removeChild(a.target),ga<ya&&(ga+=1,window.setTimeout(function(){l(e)},5e3))},t.onload=function(a){ga=0,window.document.head?window.document.head.removeChild(a.target):window.document.getElementsByTagName("head")[0].removeChild(a.target)},window.document.head?window.document.head.appendChild(t):window.document.getElementsByTagName("head")[0].appendChild(t))}function d(){var e=Array.prototype.slice.call(arguments);a._listeners.fireEvent("info",{type:"info",msg:e.join(" ")})}function p(a){return encodeURIComponent(a).replace("'","%27")}function c(a){return decodeURIComponent(a.replace("%27","'"))}function m(a){var e=0===ia.indexOf("https")?"https":"http",t,r,n,o=a.url,i=a.hasOwnProperty("maskRef")?a.maskRef:-1;if("__sendIt"!==o&&"https"===e&&o.indexOf("https")===-1&&(o=e+o.substr(o.indexOf("://"))),a.prod&&"ocr"===a.prod&&o.indexOf("&ty=js")!==-1)return void l(o);if(Sa||"__sendIt"===o)if(o&&Sa&&ba)Oa.push(o);else if("__sendIt"!==o||ba)o&&Sa&&!ba&&Ta.push(o);else{for(ba=!0,t=0,r=Ta.length;t<r;t+=1)Da.setup({pingSendTime:a&&a.baseSvrTime?a.baseSvrTime:b(a.serverTimeOffset),url:Ta.shift(),maskRefUrl:i});Ta=Ta.concat(Oa),ba=!1,Oa=[]}else Da.setup({pingSendTime:a&&a.baseSvrTime?a.baseSvrTime:b(a.serverTimeOffset),url:o,maskRefUrl:i})}function u(a,e){var t="",r,n,o,i;if(!a||!e)return a;for(i=e.length,n=0,o=a.length;n<o;n+=1)r=a.charCodeAt(n)^e.charCodeAt(n%i),t+=0===r?a.charAt(n):String.fromCharCode(r);return t}function _(e,t,r,n){var o,i;r.indexOf("[")===-1&&r.indexOf("]")===-1&&(!n.val||n.val.length<=0)?(h(e,{type:"100",msg:r+" missing -- "+N({data:e,param:"nol_comment"})}),n.state=!1,n.val=""):"{"===t||"}"===t?n.val=a.CryptoJS.MD5(n.val.toString()).toString():"<"===t||">"===t?(o=r.match(ma["<"].end),o?(i=o[0].match(/[\d]+/g),n.val=String(n.val).substr(i[0],i[1])):n.val=u(String(n.val),N({data:e,param:"nol_xorSeed"}))):"("!==t&&")"!==t||(n.val=p(n.val))}function v(a,e){var t=e.match(/[\[\{<\(]/g),r,n,o,i,s,l,d,p,c,m,u,v,f=N({data:a,param:"nol_xorSeed"})||"",g,y;if(t=t?t.reverse():[],n=e.match(/[\}\]\>\)]/g)||[],i={start:t.length?e.lastIndexOf(String(t[0])):-1,end:n.length?e.indexOf(String(n[0])):e.length},n&&">"===n[0]&&(i.end=e.search(ma["<"].end)||e.indexOf(">")),l=e.substring(i.start+1,i.end),c=l.split("||"),c.length>0)for(m=0,u=c.length;m<u&&(l=c[m],v=N({data:a,param:l}),!(v&&v.length>0));m+=1);else v=N({data:a,param:l});if(v&&v.length>0&&(y="string"==typeof l?l.split("_"):l,g=y[0]?y.splice(0,2).join("_"):y,s=ka[g]?ka[g].encoding:"",s&&(t=t.reverse().concat(s.match(/[\[\{<\(]/g)).reverse(),n=n.reverse().concat(s.match(/[\}\]>\)]/g)).reverse())),r={val:v,state:N({data:a,param:"nolPriv_sendData"})},d=t?t.length:0,p=n?n.length:0,o=Math.min(d,p),o>0)for(m=0,u=o;m<u;m+=1)_(a,t[0]||n[0],e,r,f),t.shift(),n.shift();else(!r.val||r.val&&r.val.length<=0)&&(r.state=!1,r.val="",h(a,{type:100,msg:l+" missing "+N({data:a,param:"nol_comment"})}));return{val:r.val,strManipulate:t,strManiEnd:n}}function f(e,t,r){try{var n={stripRegex:/(\|\!\<)|(\>\!\|)/g,initVec:a.CryptoJS.enc.Base64.parse(c(N({data:e,param:"nol_initVec"}))),payload:{secret:a.CryptoJS.enc.Base64.parse(N({data:e,param:"nol_encVal"})),input:"",encrypted:"",options:{mode:a.CryptoJS.mode.CBC,padding:a.CryptoJS.pad.Pkcs7}}},o=t.replace(n.stripRegex,"");return n.payload.input=y(e,o,!0),n.payload.encrypted=a.CryptoJS.AES.encrypt(n.payload.input,n.payload.secret,{iv:n.initVec,mode:n.payload.options.mode}).toString(),n.payload.encrypted}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in processNestedEncryption(). Error - "+e.message})}}function g(e,t){try{if("undefined"==typeof t&&String(N({data:e,param:"nol_keyName"})).length>0&&String(N({data:e,param:"nol_encVal"})).length>0){var r={initVec:{ivSize:128,input:"",wordArr:"",encrypted:"",processIV:function(){this.input=a.CryptoJS.lib.WordArray.random(this.ivSize/8),this.encrypted=a.CryptoJS.enc.Base64.stringify(this.input),N({data:e,param:"nol_initVec",val:this.encrypted})}}};r.initVec.processIV()}}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in generateInitVec(). Error - "+e.message})}}function y(a,e,t){var r=/\|\![\w\W]*?(\!\|)/g,n,o,i={val:"",state:N({data:a,param:"nolPriv_sendData"})},s=N({data:a,param:"nol_md5Seed"}),l,d,c,m,u=[],y,h=[],T=[],P,S="",w,b,O,C,E,L,k=N({data:a,param:"nol_xorSeed"});if(e.indexOf("nol_initVec")!==-1&&g(a,t),e=e||N({data:a,param:"nol_url"})||"",o="undefined"!=typeof t||/(\|\!\<)|(\>\!\|)/g.test(e)?e.match(r):e.match(ua.regex),null!==o)for(b=0,O=o.length;b<O;b+=1){if(n=o[b],l=n.substr(ua.length,n.length-2*ua.length),d=l.split("+"),u=[],S="",c=0,d&&d.length>1){for(C=0,E=d.length;C<E;C+=1)if(S=d[C],y=v(a,S),y.strManipulate.length>0&&(c=u.length,h=[].concat(y.strManipulate,h)),u[c]=u[c]?u[c]+y.val:y.val,y.strManiEnd.length>0&&y.strManiEnd.length!==h.length){for(T=[].concat(T,y.strManiEnd),i={val:u[c],state:N({data:a,param:"nolPriv_sendData"})},P=0,L=y.strManiEnd.length;P<L;P+=1)_(a,h[0],S,i,k),h.shift(),T.shift();u[c]=i.val}for(i.val=u.join(""),w=h.length>=T.length?h:T,P=0,L=w.length;P<L;P+=1)_(a,w[0],S,i,k),h.shift(),T.shift()}else{if(l.indexOf("nol_dcrCustomEnc")===-1)y=v(a,l);else{var I=/[\\(\\)]/g,A=!1;I.test(l)===!0&&(l=l.replace(I,""),A=!0),y=v(a,l),"string"==typeof y.val&&(m=y.val.match(ua.regex),!t&&null!==m&&m.length>0&&(y.val=f(a,y.val,e))),A===!0&&(y.val=p(y.val))}i={val:y.val,state:N({data:a,param:"nolPriv_sendData"})}}e=e.replace(n,i.val)}return e}function h(e,t,r,n){var o,i,s=N({data:e,param:"nolPriv_errorSent"});return n!==!0&&N({data:e,param:"nolPriv_sendData",val:!1}),!(!r&&(!t||s.indexOf(t.type.toString()))!==-1)&&(!!Ba.isInitialized(e)&&(o=t.type+","+p(t.msg),N({data:e,param:"nol_errorMessage",val:o}),a._listeners.fireEvent("error",{type:"error",msg:o}),i=y(e,N({data:e,param:"nol_errorURL"})),m({baseSvrTime:Ra(e),serverTimeOffset:N({data:e,param:"nolPriv_serverTimeOffset"}),url:i,maskRef:N({data:e,param:"nol_rfrmsk"})}),s+=t.type.toString()+",",N({data:e,param:"nolPriv_errorSent",val:s}),!0))}function T(a){var e=!1;e&&d(a)}function P(a,e,t){t&&!t.serviceSending[e]&&(t.serviceSending[e]=!0,l(a))}function S(a,e){var t=a||6;return Math.ceil(e/t)*t||"0"}function w(a,e){var t=!1,r=0,n=!1,i=o(N({data:a,param:"nol_unQualSegmentValue"}),"num"),s=N({data:a,param:"nol_minutes"}),l=[],d=!!e&&e.save,p,c,m,u=o(N({data:a,param:"nol_segmentTimeSpent"}),"num"),_=o(N({data:a,param:"nol_sendQual"}),"num"),v=N({data:a,param:"nol_cadence"});for(p=0,c=s.length;p<c;p+=1)m=Math.floor(s[p].tsv/N({data:a,param:"nol_creditValue"})),m>=1?(s[p].save&&"daypart"!==N({data:a,param:"nol_cadence"})?l.push(0):(l.push(N({data:a,param:"nol_creditFlag"})),r+=1,t=!0),n=!0):(l.push(0),n=!1),d?s[p].save=n:(s[p].tsv=0,s[p].save=!1,s[p].updated=!1);return N({data:a,param:"nol_duration",val:l.join("")}),_&&(t=r>=_),o(N({data:a,param:"nol_minWonOverride"}),"bool")===!0&&(t=!0),t||"interval"!==v&&"streamduration"!==v||d||("S"===N({data:a,param:"nol_segmentPrefix"})&&i&&N({data:a,param:"nol_duration",val:S(i,u)}),t=u>1),t}function b(a){return"undefined"!=typeof a?(Ra()/1e3>>0)+a:Ra()/1e3>>0}function O(a){Number(a)===a&&a%1!==0&&window.console&&window.console.warn&&window.console.warn("Warning: nol_segmentTimeSpent is a float - should be an integer.")}function C(a,e){var t=N({data:a,param:"nol_url"})||"",r,n,s,l,p=0,c,u=N({data:a,param:"nol_playerId"}),_=o(N({data:a,param:"nol_maxPingCount"}),"num"),v=o(N({data:a,param:"nol_pingCount"}),"num"),f=!!e&&e.returnLength,g=N({data:a,param:"nol_cadence"}),h=N({data:a,param:"nol_eventFilter"}),P=o(N({data:a,param:"nol_maxLength"}),"num");if(N({data:a,param:"nol_pingCreationTime",val:Ra(a)/1e3>>0}),n=N({data:a,param:"nol_timeSpentViewing"}).content,s=N({data:a,param:"nol_timeSpentViewing"}).ad,l=N({data:a,param:"nol_timeSpentViewing"}).static,O(N({data:a,param:"nol_segmentTimeSpent"})),("dcrvideo"!==N({data:a,param:"nol_product"})||"1"===N({data:a,param:"nol_forceFireOnClose_content"})||!("dcrvideo"===N({data:a,param:"nol_product"})&&0===n.nol_segmentTimeSpent||"dcrstatic"===N({data:a,param:"nol_product"})&&0===l.nol_segmentTimeSpent)||"interval"!==g&&"streamduration"!==g||0!==s.nol_count||0!==s.nol_segmentTimeSpent)&&"false"===N({data:a,param:"nol_disabled"})&&(0===_||_>v)){if(Fa.setNextTick(a,null,"content"),r=w(a,e)||"stream"===g||"impression"===g||"id3"===N({data:a,param:"nol_product"}),t=y(a,t),p=t.length,N({data:a,param:"nolPriv_sendData"})&&r&&!f||P>0&&P<p){if(N({data:a,param:"nol_id3Data"})&&N({data:a,param:"nol_id3Data",val:!1}),d(N({data:a,param:"nol_comment"})," -queued @"+Math.floor(Ra(a)/1e3)+", timeOffset == "+N({data:a,param:"nolPriv_serverTimeOffset"})+", DU == "+N({data:a,param:"nol_segmentTimeSpent"})+" -- ",t),h.onSendPing&&(D(a,h.onSendPing),"true"===N({data:a,param:"nol_disabled"})))return;m({baseSvrTime:Ra(a),serverTimeOffset:N({data:a,param:"nolPriv_serverTimeOffset"}),url:t,prod:N({data:a,param:"nol_product"}),maskRef:N({data:a,param:"nol_rfrmsk"})}),N({data:a,param:"nol_viewCount_"+a._currVidType.toLowerCase(),val:"0"}),Fa.clear(a),va&&va.hasOwnProperty(u)&&va[u].hasOwnProperty("debug")&&"logging"===va[u].debug&&(c=N({data:a,param:"nol_debugUrl"}),c||(c=N({data:a,param:"nol_prefProtocol"})+"://nielsen.guru/validation/query_string.php?"),c+="pli="+u+"&sendPing="+N({data:a,param:"nol_product"})+"&"+t.substring(t.indexOf("?")+1),T(c)),v+=1,n.nol_segmentTimeSpent=0,n.nol_count=0,s.nol_segmentTimeSpent=0,s.nol_count=0,l.nol_segmentTimeSpent=0,l.nol_count=0,N({data:a,param:"nol_pingStartTimeUTC",val:Math.round(Ra(a)/1e3)}),N({data:a,param:"nolPriv_priority",val:0}),N({data:a,param:"nol_pingCount",val:v.toString()}),N({data:a,param:"nol_forceFireOnClose_content",val:"0"});var S=i(N({data:a,param:"nol_segmentLength"}));N({data:a,param:"nol_duration",val:new Array(S.length+1).join("0")})}else if(f)return{len:p,fData:t};return null}}function E(e){try{if("undefined"==typeof e)return;var t=i(N({data:e,param:"nol_segmentLength"}));N({data:e,param:"nol_minutes",val:t}),N({data:e,param:"nol_duration",val:new Array(t.length+1).join("0")})}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in resetMinutes(). Error - "+e.message})}}function L(a,e){var t=o(N({data:a,param:"nol_segmentLength"}),"num")*o(N({data:a,param:"nol_segmentValue"}),"num"),r={segment:Math.floor(e/t+1),minute:Math.floor(e%t/N({data:a,param:"nol_segmentValue"})),seconds:e%N({data:a,param:"nol_segmentValue"})};return r}function k(e,t){var n,s=N({data:t,param:"nol_tagSrc"}),e=""!==e?e:"id3"===s&&N({data:t,param:"nol_fdcid"})!==N({data:t,param:"nol_cidNull"})?N({data:t,param:"nol_fdoffset"}):"id3"===s&&N({data:t,param:"nol_pccid"})!==N({data:t,param:"nol_cidNull"})?N({data:t,param:"nol_pcoffset"}):e,l=N({data:t,param:"nol_eventFilter"}),d=N({data:t,param:"nol_minutes"}),p=o(N({data:t,param:"nol_pingCount"}),"num"),c,m,u,_,v,f,g,y,h=N({data:t,param:"nol_playerId"}),T=a._players&&a._players.hasOwnProperty(h)?a._players[h]:-1,P=N({data:t,param:"nol_localDay"}),S=N({data:t,param:"nol_dayQhr"}),w=N({data:t,param:"nol_weekQhr"}),b,O,E,k=N({data:t,param:"nol_wmDay"}),I=N({data:t,param:"nol_wmDayQhr"}),A,x,M=o(N({data:t,param:"nol_weekEndUTC"}),"num"),V=o(N({data:t,param:"nol_weekStartUTC"}),"num"),R=M-V,F,B=o(N({data:t,param:"nolPriv_serverTimeOffset"}),"num"),j,U=N({data:t,param:"nol_timer"})||"nol_fdoffset",Q=o(N({data:t,param:"nolPriv_currMin"}),"num"),G=o(N({data:t,param:"nol_maxPingCount"}),"num"),W=o(N({data:t,param:"nol_creditValue"}),"num"),q=o(e,"num"),J=o(N({data:t,param:"nol_intrvlThrshld"}),"num")||86400,z="nol_cmsoffset"===U||"nol_pageoffset"===U?o(N({data:t,param:"nol_cmsIntrvlGp"}),"num")||2:o(N({data:t,param:"nol_id3IntrvlGp"}),"num"),H=o(N({data:t,param:"nol_segmentLength"}),"num")*o(N({data:t,param:"nol_segmentValue"}),"num"),K=o(N({data:t,param:"nol_currSeg"}),"num"),X=o(N({data:t,param:"nolPriv_now"}),"num"),Z,$=N({data:t,param:"nol_timeSpentViewing"})[t._currVidType],aa=o(N({data:t,param:"nolPriv_currPos"}),"num");if(A=Math.floor(q/86400)+1,k||N({data:t,param:"nol_wmDay",val:A}),x=Math.floor(q%86400/900)+1,I||N({data:t,param:"nol_wmDayQhr",val:x}),q>86400&&"nol_cmsoffset"===U?(q+=B,y=q+o(N({data:t,param:"nol_startDayTimeOffset"}),"num"),f=y+o(N({data:t,param:"nol_GMTOffset"}),"num")):y=f=q,b=Math.floor(f/86400)+1,P&&P!=b&&C(t),P||N({data:t,param:"nol_localDay",val:b}),q>M&&(l.onWeekEndUTC?D(t,l.onWeekEndUTC):(N({data:t,param:"nol_week",val:N({data:t,param:"nol_nextWeek"})}),N({data:t,param:"nol_period",val:N({data:t,param:"nol_nextPeriod"})}),N({data:t,param:"nol_weekStartUTC",val:M+1}),N({data:t,param:"nol_weekEndUTC",val:M+1+R}))),O=Math.floor((q-o(N({data:t,param:"nol_weekStartUTC"}),"num"))/900)+1,w&&O===w||N({data:t,param:"nol_weekQhr",val:O}),"nol_cmsoffset"===U&&(q=f%86400),E=Math.floor(q/900)+1,S||N({data:t,param:"nol_dayQhr",val:E}),q=Math.floor(q),"1"===N({data:t,param:"nol_applyViewInc"})&&(Y(t),N({data:t,param:"nol_applyViewInc",val:"0"})),!("true"===N({data:t,param:"nol_disabled"})||void 0===q||G>0&&G<=p&&"daypart"!==N({data:t,param:"nol_cadence"}))){var ea=N({data:t,param:"nol_devTimeZone"}),ta=/^GMT([-+]?)([0-9]+):([0-9]+)$/.exec(ea);if(ta){var ra="-"==ta[1]?-60:60;r(t,Ra(t)/1e3+ra*(60*Number(ta[2])+Number(ta[3])))}if("stream"!==N({data:t,param:"nol_cadence"})&&"impression"!==N({data:t,param:"nol_cadence"})){if(aa=""===aa?q:o(aa,"num"),X||(X=Ra(t)),j=Math.ceil((Ra(t)-X)/1e3)||1,Z=L(t,aa),n=Z.segment,F=Z.minute,c=Z.seconds,v=q-aa,N({data:t,param:"nolPriv_currPos",val:q}),K&&void 0!==n&&K!==n&&(("dcrvideo"!==N({data:t,param:"nol_product"})||"dcrvideo"===N({data:t,param:"nol_product"})&&N({data:t,param:"nol_segmentTimeSpent"})>0)&&C(t,{save:!0}),"episode"!==N({data:t,param:"nol_cadence"})&&N({data:t,param:"nol_pingCount",val:0}),d=i(N({data:t,param:"nol_segmentLength"})),N({data:t,param:"nol_minutes",val:d}),S&&S!==E&&(N({data:t,param:"nol_dayQhr",val:E}),N({data:t,param:"nol_weekQhr",val:O}),P&&P!==b&&N({data:t,param:"nol_localDay",val:b})),I&&I!==x&&N({data:t,param:"nol_wmDayQhr",val:x}),k&&k!==A&&N({data:t,param:"nol_wmDay",val:A})),K=n,void 0!==F&&v>0){if(Q!==F&&(d[F].save||"daypart"===N({data:t,param:"nol_cadence"})||(d[F].tsv>=W?C(t):(d[F].tsv=0,d[F].updated=!1))),v<z||v<=Math.ceil(1.5*j)&&v<J)for(g=o(N({data:t,param:"nol_sendQual"}),"num"),m=0;m<v;m+=1){if((c+m)%N({data:t,param:"nol_segmentValue"})!==0){if("daypart"!==N({data:t,param:"nol_cadence"})&&d[F].tsv>=N({data:t,param:"nol_segmentValue"})&&(d[F].save?(d[F].tsv=0,d[F].save=!1,d[F].updated=!1):C(t)),d[F].tsv+=1,$.nol_cumeTimeSpent+=1,$.nol_segmentTimeSpent+=1,d[F].tsv>=W&&g){for(d[F].updated||(N({data:t,param:"nolPriv_priority",val:Ra(t)}),d[F].updated=!0),u=0,_=0;u<d.length;u+=1)if(_+=d[u].tsv>=W?1:0,_>=g){g="send";break}"send"===g&&N({data:t,param:"nol_sendQual"})&&(l.onViewWon&&D(t,l.onViewWon),C(t,{save:!0}),g=0,"daypart"!==N({data:t,param:"nol_cadence"})&&N({data:t,param:"nol_sendQual",val:"0"}))}}else 0!==m&&(F+=1),d.length<=F?(C(t,{save:!0}),F=0,K+=1,N({data:t,param:"nol_currSeg",val:K}),N({data:t,param:"nol_pingCount",val:0}),d=i(N({data:t,param:"nol_segmentLength"})),N({data:t,param:"nol_minutes",val:d}),S&&S!==E&&(N({data:t,param:"nol_dayQhr",val:E}),N({data:t,param:"nol_weekQhr",val:O}),P&&P!==b&&N({data:t,param:"nol_localDay",val:b})),I&&I!==x&&N({data:t,param:"nol_wmDayQhr",val:x}),k&&k!==A&&N({data:t,param:"nol_wmDay",val:A})):"daypart"!==N({data:t,param:"nol_cadence"})&&!d[F].save&&d[F].tsv>=W?C(t):d[F].save||(d[F].tsv=1,d[F].updated=!1),$.nol_cumeTimeSpent+=1,$.nol_segmentTimeSpent+=1;N({data:t,param:"nolPriv_currMin",val:F})}N({data:t,param:"nolPriv_now",val:Ra(t)}),T!==-1&&"dcrstatic"!==N({data:t,param:"nol_product"})&&(T.pauseObj.pauseTime=0)}}else n=Math.floor(q/H+1),"content"===N({data:t,param:"nol_ac"})&&(K=n,N({data:t,param:"nol_currSeg",val:K})),C(t);N({data:t,param:"nol_currSeg",val:K})}}function I(a,e,t){var r=N({data:a,param:"iag_"+e});return void 0!==r&&""!==r?t="&pr=iag."+e+","+p(r):t&&t.length>0&&t.indexOf("&pr=iag")===-1?t="&pr=iag."+e+","+p(t):void 0!==t&&null!==t||(t=""),t}function A(a,e){var t,r,n,i,s,l,d,c,m,u,_,v,f,g,y,h,T=N({data:a,param:"nol_vidtype"});N({data:a,param:"nol_prod"}).indexOf("iag")>=0&&(t="",r=I(a,"sid",N({data:a,param:"nol_sid",vidType:"content"})),n=I(a,"tfid",N({data:a,param:"nol_tfid",vidType:"content"})),i=I(a,"bcr",N({data:a,param:"nol_clientid",vidType:"content"})),l=I(a,"epi",N({data:a,param:"nol_title"})||N({data:a,param:"nol_title",vidType:"content"})),s=I(a,"pgm",N({data:a,param:"nol_censuscategory"})||N({data:a,param:"nol_category"})||N({data:a,param:"nol_iagcategory"})),s||(s=I(a,"pgm",N({data:a,param:"nol_censuscategory",vidType:"content"})||N({data:a,param:"nol_category",vidType:"content"})||N({data:a,param:"nol_iagcategory",vidType:"content"})),s||(s="&pr=iag.pgm,general")),d="&pr=iag.seg,",d+=o(N({data:a,param:"nol_chapter",vidType:"content"}),"num")>1?N({data:a,param:"iag_seg"})||N({data:a,param:"nol_chapter",vidType:"content"}):"1",c=I(a,"pd",c),m=I(a,"oad",m),f=I(a,"fp",f),h=I(a,"cust1",h),"ad"===e?(u="&pr=iag.brn,"+N({data:a,param:"nol_clientid"}),_="&pr=iag.cte,"+p(N({data:a,param:"nol_adURL"})),v="midroll"===T?"&pr=iag.ap,mid":"postroll"===T?"&pr=iag.ap,post":"&pr=iag.ap,pre",r=I(a,"sid",r),n=I(a,"tfid",n),i=I(a,"bcr",i),u=I(a,"brn",u),_=I(a,"cte",_),s=I(a,"pgm",s),l=I(a,"epi",l),d=I(a,"seg",d),c=I(a,"pd",c),m=I(a,"oad",m),g=I(a,"pod",g),y=I(a,"apt",y),t=r+n+i+s+l+d+c+u+v+_+m+f+g+y+h):t=r+n+i+s+l+d+c+m+f+h,t+="&pr=iag.cp,soc",N({data:a,param:"nol_iagData",val:t}))}function x(e){var t;if(va[e.id]&&va[e.id].tags.length===va[e.id].tagSize){if(a._listeners.fireEvent("debug",{type:"debug",msg:"pli="+e.id+"&ggpm="+JSON.stringify(e)}),va[e.id].debug!==Ca&&"logging"===va[e.id].debug){if(t=va[e.id].nol_debugUrl,t||(t=va[e.id].nol_prefProtocol+"://nielsen.guru/validation/query_string.php?"),va[e.id].eventQueue.length>va[e.id].eventQueueIndex+1)for(var r=va[e.id].eventQueueIndex;r<va[e.id].eventQueue.length;r++)T(t+"pli="+e.id+"&ggpm="+JSON.stringify(va[e.id].eventQueue[r])),va[e.id].eventQueueIndex=r;t+="pli="+e.id+"&ggpm="+JSON.stringify(e),T(t)}e.timeStamp=va.hasOwnProperty(e.id)&&va[e.id].nolPriv_baseSvrTime?Ra({type:"override",baseSvrTime:va[e.id].nolPriv_baseSvrTime}):Ra();for(var r=0,n=va[e.id].tags.length;r<n;r+=1)va.hasOwnProperty(e.id)&&va[e.id].tags[r].eventListener(e)}else va[e.id]&&va[e.id].eventQueue||(va[e.id]=s(va[e.id])),va[e.id].eventQueue.push(e)}function M(a,e){var t,r;va[e].bReInit||(va[e].bReInit=!0,va[e].eventQueue=[],a&&va[e].eventQueue.push(a),l(La))}function V(a,e,t){var r=!1,n=t.toString().toLowerCase().indexOf(e.toString().toLowerCase());return"-"===a&&n===-1?r=!0:"+"===a&&(t===e||n!==-1&&t&&e)?r=!0:"--"===a&&e.toString().toLowerCase().indexOf(t.toString().toLowerCase())===-1?r=!0:"++"===a&&e.toString().toLowerCase().indexOf(t.toString().toLowerCase())!==-1&&(r=!0),r}function D(a,e,t){var r=e||N({data:a,param:"nol_finalFilter"}),n,o,i,s,l,d,p,c,m,u,_,v=t||{};if(r&&void 0!==r)for(n=0,o=r.length;n<o;n+=1){if(c=r[n],c.tagVar.length)for(var i=0,s=c.tagVar.length;i<s&&(u=N({data:a,param:c.tagVar[i].name}),u);i++);else u=N({data:a,param:c.tagVar.name});if(u&&c.tagVar.value===u){for(i=0,s=c.cond.length;i<s;i+=1){if(p=v[c.cond[i]]||N({data:a,param:c.cond[i]}),d=0===c.is.value.indexOf("nol_")&&N({data:a,param:c.is.value})?N({data:a,param:c.is.value}):c.is.value,void 0===p||void 0===d||!V(c.is.type,p,d)){m=!1;break}m=!0}if(void 0!==m&&(_=m?c.then:c.else,void 0!==_))for(l in _)_.hasOwnProperty(l)&&(void 0!==v.nol_vidtype?v[l]=_[l]:N({data:a,param:l,val:_[l]}))}}}function R(a,e){var t,r=a.data._settings,n=a.param;return void 0===e||null===e?(t=r.hasOwnProperty(n)&&va[r.nol_playerId].nol_tagMap.hasOwnProperty(n)&&("object"==typeof va[r.nol_playerId].nol_tagMap[n]||"array"==typeof va[r.nol_playerId].nol_tagMap[n])?va[r.nol_playerId].nol_tagMap[n][r[n]]:r.hasOwnProperty("nol_defaults")&&r.nol_defaults.hasOwnProperty(n)?r.nol_defaults[n]:va[r.nol_playerId].nol_tagMap.nol_defaults[n]||va[r.nol_playerId][n],void 0===t&&(t=r.hasOwnProperty(n)?r[n]:va[r.nol_playerId].nol_tagMap[n])):r.hasOwnProperty("nol_defaults")&&r.nol_defaults.hasOwnProperty(n)?r.nol_defaults[n]=e:r[n]=e,t}function N(e){try{if(e){if("string"==typeof e.param&&e.param.indexOf("nol_")===-1&&e.param.indexOf("nolPriv_")===-1&&e.param.split("_").length-1>1)return;var t="string"==typeof e.param?e.param.split("_"):e.param,r,n=t[0]?t.splice(0,2).join("_"):t,o=e.vidType||t[0]||e.data._currVidType,i=e.data._currAssetid||"0",s="undefined"!=typeof e.data._dataArrObj[o][i]?e.data._dataArrObj[o][i]:e.data._dataArrObj[o][Object.keys(e.data._dataArrObj[o]).splice(-1,1)],l=ka[n]?ka[n].clientField:n;if("object"==typeof l)r=s;else if("nol_segmentTimeSpent"===l||"nol_cumeTimeSpent"===l||"nol_count"===l){var d=N({data:e.data,param:"nol_timeSpentViewing"});r=d[o][l]}else void 0===e.val||null===e.val?(r=s&&s.hasOwnProperty(l)?s[l]:va[e.data._settings.nol_playerId][l],void 0!==r&&""!==r||(r=R(e)||"",void 0!==r&&""!==r||(0===l.indexOf("nol_")?e.param=l:e.param=n,r=R(e)||""))):s&&(s[l]=e.val);return r}return null}catch(e){window.console&&window.console.error&&window.console.error("Error in Data(): "+e.message+" __param: "+t),a._listeners.fireEvent("error",{type:"error",msg:"Error in Data(): "+e.message})}}function F(e,t){var r=Ba.findPlayer(e),n=r.oServiceCall[t.service],o=t.url,i=t.key,s;if(t.evntCB=N({data:e,param:e.serviceFlag[t.service].callback}),t.callBack=function(a){B(e,a,t)},!n&&i&&o&&o.length>0)"stnupdate"===t.evntCB&&("undefined"==typeof r.oServiceCall[t.service]||"undefined"==typeof r.oServiceCall[t.service].status||"init"!==r.oServiceCall[t.service].status&&"complete"!==r.oServiceCall[t.service].status)&&(r.oServiceCall[t.service]={status:"init",station:null,data:null}),a._listeners.addListener(t.evntCB,t.callBack,!0),P(y(e,o),t.service,r);else if(n&&"init"===n.status);else if(n&&"complete"===n.status&&i!==n.station)a._listeners.addListener(t.evntCB,t.callBack,!0),P(y(e,o),t.service,r);else if(n&&"complete"===n.status&&i===n.station){for(s in n.data)n.data.hasOwnProperty(s)&&N({data:e,param:s,val:n.data[s]});if(Aa?D(e,Aa[t.service]):D(e,Ia),"true"===N({data:e,param:"nol_disabled"}))return;e.serviceFlag[t.service].need&&(N({data:e,param:"nol_davState",val:"1"}),e.serviceFlag[t.service].need=!1,k(N({data:e,param:"nol_queueTime"}),e))}else a._listeners.fireEvent(t.evntCB,t),window.setTimeout(function(){F(e,t)},1e3)}function B(a,e,t){var r={},n,i=0,s;if(N({data:a,param:"nol_playerId"})===e.target.nol_playerId){for(s in e.target)e.target.hasOwnProperty(s)&&(N({data:a,param:s,val:e.target[s]}),r[s]=e.target[s]);var l=Ba.findPlayer(a);if(l){var d="undefined"!=typeof l.oServiceCall[t.service]&&l.oServiceCall[t.service].hasOwnProperty("status")?l.oServiceCall[t.service].status:"undefined";l.oServiceCall[t.service]={status:"complete",prevStatus:d,station:t.key,data:r},l.serviceSending[t.service]=!1}if(Aa?D(a,Aa[t.service]):D(a,Ia),"true"===N({data:a,param:"nol_disabled"}))return;a.serviceFlag[t.service].need&&(N({data:a,param:"nol_davState",val:"1"}),a.serviceFlag[t.service].need=!1,e.target.hasOwnProperty("nol_fdTimeCode")&&"daypart"===N({data:a,param:"nol_cadence"})&&(i=o(e.target.nol_fdTimeCode,"num"),n=o(N({data:a,param:"nol_queueTime"}),"num"),N({data:a,param:"nol_queueTime",val:n+i})),k(N({data:a,param:"nol_queueTime"}),a))}}function j(a){return"id3"===N({data:a,param:"nol_product"})&&N({data:a,param:"nol_id3Data"})?void C(a):void("true"!==N({data:a,param:"nol_disabled"})&&"1"===N({data:a,param:"nol_davState"})&&(N({data:a,param:"nol_davState",val:"2"}),"daypart"===N({data:a,param:"nol_cadence"})?C(a,{save:!0}):C(a),E(a),N({data:a,param:"nol_disabled",val:"true"})))}function U(a){"dcrstatic"===N({data:a,param:"nol_product"})&&"stream"!==N({data:a,param:"nol_cadence"})||("content"===N({data:a,param:"nol_ac"})&&N({data:a,param:"nol_segmentTimeSpent"})>0||"streamduration"===N({data:a,param:"nol_cadence"})&&N({data:a,param:"nol_segmentTimeSpent"})>0||"dcrstatic"===N({data:a,param:"nol_product"})&&"stream"===N({data:a,param:"nol_cadence"})||"postroll"===N({data:a,param:"nol_vidtype"})&&"interval"===N({data:a,param:"nol_cadence"}))&&("content"===N({data:a,param:"nol_ac"})?C(a,{save:!0}):C(a),N({data:a,param:"nolPriv_now",val:0}))}function Q(e,t){var r=null,n=Ra(e);try{e&&Fa.isEnabled(e)&&(r=ja.inferEvent(t.currEvtType,e,t._param1,n,t._param3),r&&(r.event!==ja.events.play&&Ba.state.set(e,r),Fa.preProcess(e,r)))}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in ggpmPreProc(). Error preprocessing event - "+e.message})}return{inferredEvent:r,timestamp:n}}function G(e,t){try{e&&t.inferredEvent&&(t.inferredEvent.event===ja.events.play&&Ba.state.set(e,t.inferredEvent),Fa.postProcess(e,t.inferredEvent))}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in ggpmPostProc(). Error postprocessing event - "+e.message})}}function W(e){try{var t=N({data:e,param:"nol_playerId"});va&&va.hasOwnProperty(t)&&(!va[t].hasOwnProperty("nol_sessionId")||va[t].hasOwnProperty("forceStreamRegen")&&va[t].forceStreamRegen===!0)&&(va[t].nol_sessionId="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var e=16*Math.random()|0,t="x"==a?e:3&e|8;return t.toString(16)}),va[t].forceStreamRegen=!1)}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in calcStreamId - "+e.message})}}function q(e,t){var r=N({data:e,param:"nol_playerId"});if(r===t.id){if(!t.evtInfo||t.evtInfo.hasOwnProperty("param1")&&(null===t.evtInfo.param1||"undefined"==typeof t.evtInfo.param1))return void a._listeners.fireEvent("error",{type:"error",msg:"Error in handleGgpm - Invalid Param1 passed"});var n=t.evtInfo,s=n.param1,l=n.param3?n.param3:s.hasOwnProperty("param3")?s.param3:s,d,p,c,m,u=o(N({data:e,param:"nolPriv_id3Count"}),"num"),_,v,f,g=N({data:e,param:"nol_segmentSpentViewing"}),y=N({data:e,param:"nol_enableFilterMap"}),T="|mtvr|,|dprid3|,|id3|",P,S,w={filters:{onId3PcCidChanged:!1,onId3FdCidChanged:!1},count:0,filterType:"old"},b,O,E,L=N({data:e,param:"nol_prod"}),I,x={},V=n.eventType.toString(),R,B="content",q,J,H,X=N({data:e,param:"nolPriv_serverTimeOffset"}),Z=ka.nol_vidtype?ka.nol_vidtype.clientField:"nol_vidtype",$=ka.nol_tagSrc?ka.nol_tagSrc.clientField:"nol_tagSrc",aa=ka.nol_assetid?ka.nol_assetid.clientField:"nol_assetid",ea=ka.nol_ac?ka.nol_ac.clientField:"nol_ac",ta=ka.nol_linearAdLoadFlag?ka.nol_linearAdLoadFlag.clientField:"nol_linearAdLoadFlag",ra=l[Z]?l[Z].toString().toLowerCase():"",na=Math.round(Ra(e)/1e3),oa="nol_assetid",ia=Ba.findPlayer(e),sa=Q(e,{currEvtType:V,_param1:s,_param3:l});switch(V.toLowerCase()){case"3":case"14":case"15":case"loadmetadata":case"staticstart":case"pauseloadmeta":if(("14"===V||"staticstart"===V)&&"dcrstatic"!==N({data:e,param:"nol_product"}))return;if("14"!==V&&"staticstart"!==V&&"dcrstatic"===N({data:e,param:"nol_product"}))return;var la=","+N({data:e,param:"nol_contentType"});e._currVidType=ra&&la.indexOf(","+ra)!==-1?"content":"dcrstatic"===N({data:e,param:"nol_product"})?"static":"ad";var da=null,pa=null;if(("ad"===N({data:e,param:"nol_ac"})&&N({data:e,param:"nol_segmentTimeSpent"})>0&&"streamduration"===N({data:e,param:"nol_cadence"})||"stream"===N({data:e,param:"nol_cadence"})&&"dcrstatic"===N({data:e,param:"nol_product"})||"dcrstatic"===N({data:e,param:"nol_product"})&&String(e._currAssetid)!==String(l[aa]))&&j(e),N({data:e,param:"nol_onCompleteFired"})===!0?("content"!==e._currVidType&&"static"!==e._currVidType||("content"===e._currVidType.toLowerCase()&&va[r].hasOwnProperty("forceStreamRegen")&&va[r].forceStreamRegen===!0&&W(e),N({data:e,param:oa,val:-1}),"content"===e._currVidType?(da=Ba.state.clone(e),pa=Fa.clone(e),z(e)):z(e,!0)),N({data:e,param:"nol_onCompleteFired",val:!1})):"14"!==V&&"staticstart"!==V||"stream"!==N({data:e,param:"nol_cadence"})||(N({data:e,param:oa,val:-1}),z(e)),"ad"===e._currVidType){var ca=i(N({data:e,param:"nol_segmentLength"}));N({data:e,param:"nol_minutes",val:ca}),N({data:e,param:oa,val:-1}),N({data:e,param:Z,val:ra})}if(e._currAssetid="daypart"===N({data:e,param:"nol_cadence"})||"stream"!==N({data:e,param:"nol_cadence"})&&"dcrstatic"===N({data:e,param:"nol_product"})?l[aa]:e._currAssetid,l.nol_ac=e._currVidType,o(N({data:e,param:"nol_serverTime"}),"num")+86400<Math.round(Ra(e)/1e3)+X)return j(e),void M(t,N({data:e,param:"nol_playerId"}));for(R=0,q=y.length;R<q;R+=1)d=ka[y[R]]?ka[y[R]].clientField:y[R],x[y[R]]=String(l[d]||"");if(_=l.hasOwnProperty(aa)?String(l[aa]):N({data:e,param:"nolPriv_assetid"}),D(e,Ia.onCmsDetected,x),"false"!==x.nol_disabled||!l)return void("cms"!==e._currTagSrc&&(K(e,"loadMetadata",l),N({data:e,param:"nol_disabled",val:"true"})));if("static"===e._currVidType&&"dcrstatic"===N({data:e,param:"nol_product"})?(a._listeners.fireEvent("updateCmbStaticPage",{evtInfo:n,plid:r}),B="static"):B="content",_!==N({data:e,param:oa})){if("ad"!==N({data:e,param:"nol_ac"})&&j(e),K(e,"loadMetadata",l),N({data:e,param:"nolPriv_assetid",val:N({data:e,param:oa})}),"15"!==V&&"loadmetadata"!==V||"id3"!==N({data:e,param:$,vidType:"content"})||N({data:e,param:"nolPriv_dtvrHybrid",vidType:"content"})!==!1||N({data:e,param:"nolPriv_dtvrHybrid",val:!0,vidType:"content"}),D(e,Ia.onAssetIdChanged),"true"===N({data:e,param:"nol_disabled"}))return;if("drm"===N({data:e,param:"nol_product"}))e.serviceFlag.stn.need=!0;else if(e.serviceFlag.stn.need=!1,"true"===N({data:e,param:"nol_disabled"}))return;if(D(e,Ia.onComplete),da&&Ba.state.bind(e,da),pa&&Fa.bind(e,pa),"true"===N({data:e,param:"nol_disabled"}))return}if("ad"===e._currVidType&&"dcrvideo"===N({data:e,param:"nol_product"})&&"impression"!==N({data:e,param:"nol_cadence"})){var ma=N({data:e,param:"nol_timeSpentViewing"});ma[e._currVidType].nol_count++}N({data:e,param:"nol_pingStartTimeUTC",val:Math.round(Ra(e)/1e3)}),L.indexOf("iag")!==-1&&A(e,e._currVidType,ka),("ad"===e._currVidType&&"dcrvideo"!==N({data:e,param:"nol_product"})||"stream"===N({data:e,param:"nol_cadence"}))&&(N({data:e,param:"nol_pingCount",val:0}),N({data:e,param:"nolPriv_sendData",val:!0}),N({data:e,param:"nol_davState",val:"0"}),e.serviceFlag.stn.need||"content"===e._currVidType||"nol_cmsoffset"!==N({data:e,param:"nol_timer"})&&"nol_pageoffset"!==N({data:e,param:"nol_timer"})||k(0,e)),"14"!==V&&"staticstart"!==V||"dcrstatic"!==N({data:e,param:"nol_product"})||ia.static.started===!0||(a.PLDCR.start(!0),ia.static.started=!0);break;case"5":case"play":if("mtvr"===N({data:e,param:"nol_product"})){if(E=ka.nol_channelName?ka.nol_channelName.clientField:"nol_channelName",l[E]&&l[E].length>0)for(J in l)l.hasOwnProperty(J)&&N({
data:e,param:J,val:l[J]})}else"dcrvideo"===N({data:e,param:"nol_product"})&&(e._currVidType="content",x={nol_vidtype:N({data:e,param:Z,vidType:e._currVidType}),nol_tagSrc:N({data:e,param:$,vidType:e._currVidType}),nol_linearAdLoadFlag:N({data:e,param:ta,vidType:e._currVidType}),nol_ac:N({data:e,param:ea,vidType:e._currVidType})},D(e,Ia.onCmsDetected,x));break;case"6":case"pause":U(e);break;case"7":case"stop":U(e);break;case"updateott":if(U(e),s&&s.hasOwnProperty("ottStatus")&&s.ottStatus.length>0){for(var oa in s)s.hasOwnProperty(oa)&&(N({data:e,param:oa,val:s[oa],vidType:"content"}),ia.ottStatusObj[oa]=s[oa]);Ia.onOTTDetected&&D(e,Ia.onOTTDetected)}break;case"57":case"56":case"end":case"oncomplete":case"staticend":if(("56"===V||"staticend"===V)&&"dcrstatic"!==N({data:e,param:"nol_product"}))return;if("56"!==V&&"staticend"!==V&&"dcrstatic"===N({data:e,param:"nol_product"}))return;if(!("57"!==V&&"onComplete"!==V||"mtvr"!==N({data:e,param:"nol_product"})&&"id3"!==N({data:e,param:$,vidType:"content"})||N({data:e,param:"nolPriv_dtvrHybrid",vidType:"content"})===!0))return;"ad"===e._currVidType&&("streamduration"===N({data:e,param:"nol_cadence"})?C(e):"dcrvideo"===N({data:e,param:"nol_product"})&&"interval"===N({data:e,param:"nol_cadence"})&&(""===N({data:e,param:"nol_dataDate",vidType:"content"})&&""!==N({data:e,param:"nol_dataDate"})&&(N({data:e,param:"nol_dataDate",val:N({data:e,param:"nol_dataDate"}),vidType:"content"}),N({data:e,param:"nol_hourCode",val:N({data:e,param:"nol_hourCode"}),vidType:"content"}),N({data:e,param:"nol_dayId",val:N({data:e,param:"nol_dayId"}),vidType:"content"})),e._currVidType="content",Ia.onEndDetected&&D(e,Ia.onEndDetected),C(e))),"static"!==N({data:e,param:"nol_ac"})&&(e._currVidType="content"),Ia.onEndDetected&&D(e,Ia.onEndDetected),N({data:e,param:"nol_forceFireOnClose_content",val:"1"}),"false"!==N({data:e,param:"nol_disabled"})&&"id3"!==N({data:e,param:"nol_product"})||("static"===N({data:e,param:"nol_ac"})&&a._listeners.fireEvent("removeCmbAssetId",n),j(e)),N({data:e,param:"nol_onCompleteFired",val:!0}),va[r].forceStreamRegen=!0,"56"!=V&&"staticend"!=V||"dcrstatic"!==N({data:e,param:"nol_product"})||(a.PLDCR.stop(),ia.static.started=!1),"57"!==V&&"onComplete"!==V||N({data:e,param:"nolPriv_dtvrHybrid",val:!1,vidType:"content"});break;case"48":case"setpageduration":case"pageduration":case"staticposition":if("true"===N({data:e,param:"nol_disabled"})||!s||"nol_pageoffset"!==N({data:e,param:"nol_timer"}))return;"1"===N({data:e,param:"nol_onPaginateFired_static"})&&(N({data:e,param:"nol_onPaginateFired",val:"0",vidType:"static"}),"impression"!==N({data:e,param:"nol_cadence"})&&Y(e,{vidType:"static"})),H=o(N({data:e,param:"nol_highWM"}),"num"),H<o(s,"num")&&N({data:e,param:"nol_highWM",val:s}),k(s,e),N({data:e,param:"nol_davState",val:"1"});break;case"49":case"setplayheadposition":case"playheadposition":if(s>-1){if(N({data:e,param:"nol_onCompleteFired"})===!0&&a._listeners.fireEvent("flushPauseEventQueue"),"true"===N({data:e,param:"nol_disabled"})||!s||"nol_cmsoffset"!==N({data:e,param:"nol_timer"})||"ad"===e._currVidType&&"dcrvideo"===N({data:e,param:"nol_product"})&&"impression"===N({data:e,param:"nol_cadence"}))return;if("number"!=typeof s){if("string"!=typeof s)return;s=o(s,"num")}N({data:e,param:"nol_isLive",val:(s>86400).toString()}),H=o(N({data:e,param:"nol_highWM"}),"num"),H<s&&N({data:e,param:"nol_highWM",val:s}),e.serviceFlag.stn.need?(N({data:e,param:"nol_queueTime",val:s}),F(e,{service:"stn",key:N({data:e,param:"nol_assetid"}),url:N({data:e,param:"nol_stationURL"}),nol_playerId:N({data:e,param:"nol_playerId"})})):k(s,e),N({data:e,param:"nol_davState",val:"1"})}else t.timeStamp&&!Na[t.timeStamp]&&(Na[t.timeStamp]=h(e,{type:15,msg:"A negative playhead position was sent and will be ignored."},void 0,!0),Na[t.timeStamp]&&a._listeners.fireEvent("warn",{type:"warn",msg:"Warning: A negative playhead position was sent and will be ignored."}));break;case"55":case"sendid3":if(("object"==typeof s&&Object.keys(s).length>0||"string"==typeof s&&s.length>0)&&(N({data:e,param:"nol_onCompleteFired"})===!0&&ia&&ia.getPauseQueueCount&&ia.getPauseQueueCount()>0?a._listeners.fireEvent("flushPauseEventQueue"):N({data:e,param:"nol_onCompleteFired"})===!0&&ia&&!ia.getPauseQueueCount&&a._listeners.fireEvent("flushPauseEventQueue"),"object"==typeof s))for(q=0;q<s.length;q+=1)if(s[q].key&&"PRIV"===s[q].key){s=s[q].info;break}if(S=s.toString(),249!==S.length&&t.timeStamp&&!Na[t.timeStamp]&&(Na[t.timeStamp]=!0,window.console&&window.console.warn&&window.console.warn("Warning: ID3 tag length is not 249."),a._listeners.fireEvent("warn",{type:"warn",msg:"ID3 tag length is not 249."})),P=S.split("/"),s={},P.length<o(Va.nol_breakout,"num"))return;for(J in Va)Va.hasOwnProperty(J)&&(s[J]=P[Va[J]],"nol_breakout"===J&&(s[J]=P[o(Va[J],"num")].substr(0,2)),x[J]=s[J]);if(!s||N({data:e,param:"nol_tsvBreakoutMap"})&&N({data:e,param:"nol_tsvBreakoutMap"}).enable.indexOf(s.nol_breakout)===-1||s.nol_nWebAddress.indexOf("nielsen.com")===-1||s.nol_fdcid===N({data:e,param:"nol_cidNull"})&&s.nol_pccid===N({data:e,param:"nol_cidNull"}))return;for(e._currVidType="content",R=0,q=y.length;R<q;R+=1)d=ka[y[R]]?ka[y[R]].clientField:y[R],x[y[R]]=s[d]||N({data:e,param:y[R]});if(x.nol_vidtype="content",D(e,Ia.onId3Detected,x),"false"!==x.nol_disabled||"nol_cmsoffset"===N({data:e,param:"nol_timer"}))return;if("daypart"===N({data:e,param:"nol_cadence"})){var ua=N({data:e,param:"nol_assetid"});!ua&&s.nol_fdcid&&s.nol_fdcid!==N({data:e,param:"nol_cidNull"})?e._currAssetid=s.nol_fdcid:!e._currAssetid&&ua&&(e._currAssetid=ua)}if(s.nol_ac=e._currVidType,s.nol_assetid=N({data:e,param:"nol_assetid"})||e._currAssetid,u>0&&(N({data:e,param:"nol_product"}).indexOf("id3")!==-1||N({data:e,param:"nol_product"}).indexOf("mtvr")!==-1)&&(s.nol_pccid!==N({data:e,param:"nol_cidNull"})&&s.nol_pccid!==N({data:e,param:"nol_pccid"})||s.nol_fdcid!==N({data:e,param:"nol_cidNull"})&&s.nol_fdcid!==N({data:e,param:"nol_fdcid"}))&&C(e),!N({data:e,param:"nol_subTag"})&&"id3"!==N({data:e,param:"nol_product"})||s.nol_pccid===N({data:e,param:"nol_cidNull"})||s.nol_pccid===N({data:e,param:"nol_pccid"})||(w.filters.onId3PcCidChanged=!0,w.count+=1),N({data:e,param:"nol_subTag"})||s.nol_fdcid===N({data:e,param:"nol_cidNull"})||s.nol_fdcid===N({data:e,param:"nol_fdcid"})||(w.filters.onId3FdCidChanged=!0,w.count+=1),w.count){if(K(e,"sendID3",s),!w.filters.onId3FdCidChanged&&N({data:e,param:"nol_fdcid"})!=N({data:e,param:"nol_cidNull"})||N({data:e,param:"nol_tsvBreakoutMap"}).enable.indexOf(s.nol_breakout)===-1||(e.serviceFlag.tsv.need=!0),w.count>0)for(J in w.filters)if(w.filters[J]&&(D(e,Ia[J]),"true"===N({data:e,param:"nol_disabled"})))return;if(Ia.onComplete&&(D(e,Ia.onComplete),"true"===N({data:e,param:"nol_disabled"})))return}else for(J in s)s.hasOwnProperty(J)&&N({data:e,param:J,val:s[J]});if(N({data:e,param:"nol_id3Raw",val:S}),e.serviceFlag.tsv.need&&T.indexOf("|"+N({data:e,param:"nol_product"})+"|")!==-1&&(O=N(w.filters.onId3PcCidChanged===!0?{data:e,param:"nol_pccid"}:{data:e,param:"nol_fdcid"}),F(e,{service:"tsv",key:O,url:N({data:e,param:"nol_tsvURL"})})),"id3"===N({data:e,param:"nol_product"})&&s.nol_watermark&&String(s.nol_watermark).length>0)return v=N({data:e,param:"nol_id3Data"}),f=Math.round(Ra(e)/1e3+X),I=N({data:e,param:"nol_id3Seq"})||0,v?N({data:e,param:"nol_id3Data",val:v+="|"+f+","+N({data:e,param:"nol_id3Raw"})}):(N({data:e,param:"nol_id3Data",val:I+":"+N({data:e,param:"nol_clocksrc"})+":"+N({data:e,param:"nol_tsvFlag"})+":"+f+","+N({data:e,param:"nol_id3Raw"})}),N({data:e,param:"nol_id3Seq",val:o(I,"num")+1,vidType:"content"})),u>0&&C(e,{returnLength:!0}),u+=1,N({data:e,param:"nolPriv_id3Count",val:u}),void N({data:e,param:"nol_davState",val:"1"});if(u+=1,N({data:e,param:"nolPriv_id3Count",val:u}),b=N({data:e,param:N({data:e,param:"nol_timer"})})||N({data:e,param:"nol_fdoffset"}),"daypart"===N({data:e,param:"nol_cadence"})&&(b=o(b,"num"),b+="nol_pcoffset"==N({data:e,param:"nol_timer"})?o(N({data:e,param:"nol_pcTimeCode"}),"num"):o(N({data:e,param:"nol_fdTimeCode"}),"num")),e.serviceFlag.tsv.need)N({data:e,param:"nol_queueTime",val:b});else{if("true"===N({data:e,param:"nol_disabled"}))return;k(b,e),N({data:e,param:"nol_davState",val:"1"})}break;case"60":case"mute":break;case"30":case"onpaginate":"dcrstatic"===N({data:e,param:"nol_product"})&&Ia.onPaginateDetected&&"stream"!==N({data:e,param:"nol_cadence"})&&D(e,Ia.onPaginateDetected),N({data:e,param:"nol_onPaginateFired",val:"1",vidType:"static"});break;case"35":case"updatemetadata":if("dcrvideo"===N({data:e,param:"nol_product"})){Ba.updateMetadata(e,l,ka);var _a=N({data:e,param:"nol_adLoadType"});""!==_a&&void 0!==_a&&null!==_a&&D(e,Ia.onAdLoadFlag)}}G(e,sa)}}function J(a){var e,t=null,r="content"==a._currVidType?o(N({data:a,param:"nol_chnlCountThrshld"}),"num")||ca:o(N({data:a,param:"nol_staticCountThrshld"}),"num")||ca,n=a._dataArrObj[a._currVidType],i,s=0,l=a._dataArrObj.count;if(!a._dataArrObj[a._currVidType].hasOwnProperty(a._currAssetid)){if(l[a._currVidType]>=r){for(i in n)if(n.hasOwnProperty(i)){if(s=n[i].nolPriv_priority,s<=0){e=i;break}(null===t||t>s)&&(t=s,e=i)}n.hasOwnProperty(e)&&(delete n[e],l[a._currVidType]-=1)}a._dataArrObj[a._currVidType][a._currAssetid]={nolPriv_priority:0},l[a._currVidType]+=1}}function z(a,e){"undefined"!=typeof e&&e===!0&&(a._dataArrObj.static={}),a._dataArrObj.ad={},a._dataArrObj.content={},a._dataArrObj.count={content:0,ad:0,static:0},a._currAssetid="0"}function H(e){try{var t=N({data:e,param:"nol_playerId"});if(t&&a._players&&a._players.hasOwnProperty(t)){var r=a._players[t];if(r&&Object.keys(r.ottStatusObj).length>0){var n;for(n in r.ottStatusObj)N({data:e,param:n,val:r.ottStatusObj[n],vidType:"content"})}}}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in populateOttStatus"+e})}}function Y(e,t){try{if("1"===N({data:e,param:"nol_unifiedEnabled"})){var r=t&&t.hasOwnProperty("vidType")?t.vidType:e._currVidType.toLowerCase(),n=o(N({data:e,param:"nol_viewCount_"+r}),"num");N({data:e,param:"nol_viewCount_"+r,val:n+=1}),"1"===N({data:e,param:"nol_applyViewInc"})&&N({data:e,param:"nol_applyViewInc",val:"0"})}}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in incViewCnt"+e})}}function K(a,e,t){var r="",n,o,i="nol_minutes, nol_tagPresence, nol_pingCount, nol_currSeg, nol_segmentTimeSpent, nol_cumeTimeSpent, nol_count, nolPriv_baseSvrTime",s=N({data:a,param:{}}),l,d,p=N({data:a,param:"nol_playerId"});if(J(a),"ad"===a._currVidType.toLowerCase()&&(r="st,a",N({data:a,param:"nol_currSeg",val:"0"})),""===N({data:a,param:"nol_errorURL"})&&N({data:a,param:"nol_errorURL",val:ia+oa+la+"?message=|![nol_errorMessage]!|"}),"loadMetadata"===e)for(n in s)s.hasOwnProperty(n)&&i.indexOf(n)===-1&&N({data:a,param:n,val:R({data:a,param:n})||""});for(n in t)t.hasOwnProperty(n)&&N({data:a,param:String(n),val:String(t[n])});N({data:a,param:"nolPriv_sendData",val:!0}),N({data:a,param:"nol_davState",val:"0"}),N({data:a,param:"nol_highWM",val:"0"}),N({data:a,param:"nol_iagData",val:""}),N({data:a,param:"nol_disabled",val:"false"}),N({data:a,param:"nol_sendQual",val:R({data:a,param:"nol_sendQual"})||""}),N({data:a,param:"nolPriv_assetid",val:""}),N({data:a,param:"nol_c3"})||N({data:a,param:"nol_c3",val:r}),"content"===a._currVidType.toLowerCase()&&W(a),N({data:a,param:"nol_applyViewInc",val:"1"}),(!N({data:a,param:"nol_minutes"})||"daypart"!==N({data:a,param:"nol_cadence"})&&"dcrstatic"!==N({data:a,param:"nol_product"})||"dcrstatic"===N({data:a,param:"nol_product"})&&"stream"===N({data:a,param:"nol_cadence"}))&&(E(a),N({data:a,param:"nol_pingCount",val:0}));var c=N({data:a,param:"nol_adLoadType"});""!==c&&void 0!==c&&null!==c&&D(a,Ia.onAdLoadFlag),H(a)}function X(e,t){var r=t.id||t.getId?t.getId():"0",o=va[r].nol_tagMap.nol_url,i,s,l,d=0,p=o?o[e.nol_url]||e.nol_url||"":e.nol_url||"",c={stn:{need:!1,callback:"nol_stnevt"},tsv:{need:!1,callback:"nol_tsvevt"}},u={ad:{},content:{},static:{},count:{content:0,static:0}},_={nol_disabled:"true",nol_errorMessage:"none",nol_vidtype:"",nol_muteState:"0",nol_volumeLevel:"100",nol_clockSource:"D",nol_aggregate:"1",nol_pingCount:"0",nol_intrvlThrshld:"90",nol_id3IntrvlGp:"15",nolPriv_sendData:!0,nol_timer:"nol_fdoffset",nol_isLive:"false",nolPriv_errorSent:"",nolPriv_id3Count:0,nolPriv_cmsMap:{},nol_timeSpentViewing:{ad:{nol_cumeTimeSpent:0,nol_segmentTimeSpent:0,nol_count:0},content:{nol_cumeTimeSpent:0,nol_segmentTimeSpent:0,nol_count:0},static:{nol_cumeTimeSpent:0,nol_segmentTimeSpent:0,nol_count:0}},nol_enableFilterMap:["nol_vidtype","nol_tagSrc","nol_linearAdLoadFlag","nol_ac"],nol_xorSeed:"N!3ls3nBL",nol_currSeg:"0",nol_minWonOverride:"0",nol_customExtension:["nol_legacyCustom"],nol_pingCreationTime:"0",nol_pingSendTime:"0",nol_clientUrl:window.location.href,nol_sendTime:"0",nol_pageURL:window.location.href.replace(/\"/g,"").replace(/\'/g,"").replace(/%27/g,"").replace(/%22/g,""),nol_referrerURL:window.document.referrer.replace(/\"/g,"").replace(/\'/g,"").replace(/%27/g,"").replace(/%22/g,""),nol_ottStatus:"0",nol_ottType:"none",nol_ottDevice:"NA",nol_ottDeviceName:"NA",nol_ottDeviceID:"NA",nol_ottDeviceManufacturer:"NA",nol_ottDeviceModel:"NA",nol_ottDeviceVersion:"NA",nol_onPaginateFired:"0",nol_forceFireOnClose:"0",nol_applyViewInc:"0"},v=e;v.nol_playerId=r;var f={_dataArrObj:u,_settings:v,_currVidType:"ad",_currAssetid:"0",serviceFlag:c};a._listeners.addListener("tick",function(){if(t.pauseObj.eventPauseTime>=t.pauseObj.cmsPauseTime&&Ba.state.status.current(f)!==Ba.states.stopped&&Ba.state.status.current(f)!==Ba.states.paused&&Fa.isEnabled(f)){var e={event:ja.events.pause,curPos:Ba.state.position.current(f),prevPos:null,timestamp:Ba.state.timeStamp.current(f)};Ba.state.set(f,e),Fa.preProcess(f,e),t.pauseObj.eventPauseTime=0}t.pauseObj.pauseTime>t.pauseObj.maxPauseTime&&"dcrstatic"!==N({data:f,param:"nol_product"})&&(t.pauseObj.pauseTime=0,a._listeners.fireEvent("handleSessionReset",{plid:r,passedFdata:f}),a._listeners.fireEvent("debug",{type:"debug",msg:"Max pause time reached. Just fired handleSessionReset."}))}),z(f);for(l in _)e.hasOwnProperty(l)?v[l]=e[l]:v[l]=va[r][l]||_[l];if(v.nol_customExtension&&p){for(i=0,s=v.nol_customExtension.length;i<s;i+=1)p=p.replace("|!["+v.nol_customExtension[i]+"]!|",va[r][v.nol_customExtension[i]]||"");v.nol_url=p}if("true"!==N({data:f,param:"nol_fireStop"})&&"interval,episode,streamduration".indexOf(N({data:f,param:"nol_cadence"}))===-1||n("pagehide||beforeunload",function(a){Sa&&(window.clearInterval(Sa),Sa=0,m({baseSvrTime:Ra(f),serverTimeOffset:N({data:f,param:"nolPriv_serverTimeOffset"}),url:"__sendIt",maskRef:N({data:f,param:"nol_rfrmsk"})})),"sendBeacon"in navigator&&(Ma=!0),N({data:f,param:"nol_forceFireOnClose_content",val:"1"}),Ia.onEndDetected&&D(f,Ia.onEndDetected),Fa.setNextTick(f,null,"content"),j(f)}),this.eventListener=function(a){q(f,a)},va[r].eventQueue.length>d)for(i=0;i<va[r].eventQueue.length;i+=1)va[r]&&va[r].eventQueue&&(va[r].eventQueue[i].timeStamp="queued"+i),q(f,va[r].eventQueue[i]),d=i}function Z(e){e&&e.hasOwnProperty("configReq")&&e.hasOwnProperty("player")&&e.configReq.length>0&&"undefined"!=typeof e.player?(l(e.configReq),window.clearInterval(e.player.lsPopulatedInterval),e.player.lsPopulatedInterval=0):a._listeners.fireEvent("error",{type:"error",msg:"Error in handleConfigRequest. Args is null or missing configReq or player."})}var $=a.PLDPR=a.PLDPR||{},aa=window.NOLCMB,ea=aa.sdkvForConfig?aa.sdkvForConfig():"bj.5.0.0",ta="5.1.0",ra="75-9",na=a.getBaseBuildVer?a.getBaseBuildVer()+ra:ta+ra,oa="cgi-bin/",ia=aa.getConfigAddress(),sa="cfg",la="error",da=a.getLS(),pa=a.getConfigVer?a.getConfigVer():300,ca=5,ma={"[":{end:"]",count:0},"{":{end:"}",count:0},"<":{end:/\.\d+,\d+\>/g,count:0}},ua={regex:/\|\!(\<(.*)\>)*[\w\W]*?(\!\|)/g,length:2},_a=/[\[\{<\(\}\]>\)]/g,va=$.dataObj||{},fa=0,ga=0,ya=5,ha=5,Ta=[],Pa,Sa,wa=2,ba=!1,Oa=[],Ca="false",Ea=Ca,La,ka={},Ia={},Aa={},xa=!1,Ma=!1,Va,Da={send:function(t,r){var n=t,o=n.url.indexOf("&c62=")!==-1?e(n.url,"c62=")+"&c62=sendTime,"+("undefined"!=typeof r?r/1e3>>0:Ra()/1e3>>0):n.url,i=this,s=e(o,"rnd=")+"&rnd="+Math.round(1e6*Math.random()),l=Ma?{onerror:{},onload:{}}:new Image;l.onerror=function(a){i.onError(a,n)},l.onload=function(a){},a.postMsgAvail&&n.hasOwnProperty("maskRefUrl")&&n.maskRefUrl!==-1&&"true"===n.maskRefUrl?Ua.sendMaskedPing(s):Ma?navigator.sendBeacon(s):l.src=s},setup:function(a){var e=this,t=a.hasOwnProperty("url")?a.url:"",r=a.params||{url:t,errorDelay:1e3*(a.delay||ha),retry:0,maskRefUrl:a.hasOwnProperty("maskRefUrl")&&String(a.maskRefUrl).length>0?a.maskRefUrl:-1};t&&t.length>0&&e.send(r,a.pingSendTime)},onError:function(a,e){var t=this,r=a.target.src;e&&e.retry<ya&&r&&r.length>0&&(e.retry+=1,e.url=r,window.setTimeout(function(){t.send(e)},e.errorDelay))}},Ra=function(a){return Ba.getTime(a)},Na={},Fa=function(){var a="nol_eventData",e="nol_eventDataDelimiter",t="nol_eventDataEvents",r="nol_eventDataEnabled",n=":",o={delimiter:"",eventsList:[]},i=function(){var a={play:{name:"play",abbrv:"PL"},pause:{name:"pause",abbrv:"PU"},rewind:{name:"rewind",abbrv:"RW"},forward:{name:"forward",abbrv:"FW"},stop:{name:"stop",abbrv:"ST"},resume:{name:"resume",abbrv:"RE"},mute:{name:"mute",abbrv:"MT"}};return a}(),s={get:function(e,t){var r="";return e&&(r=N({data:e,param:a,vidType:t||e._currVidType})),r},set:function(e,t,r){return e&&N({data:e,param:a,val:t,vidType:r||e._currVidType}),e},clear:function(e){e&&(N({data:e,param:a,val:"",vidType:"ad"}),N({data:e,param:a,val:"",vidType:"content"}))},clone:function(a){try{return{content:s.get(a,"content"),ad:s.get(a,"ad")}}catch(a){return null}},bind:function(a,e){try{if(a&&e)for(var t in e)s.set(a,e[t],t)}catch(a){}},append:function(a,e){if(a&&e){var t=s.get(a),r=s.delimiter(a),n=s.parseEventData(e);s.set(a,t?[t,n].join(r):n)}},delimiter:function(a){return a?(o.delimiter||(o.delimiter=N({data:a,param:e})),o.delimiter):""},isEnabled:function(a){return!!a&&"true"===N({data:a,param:r})},isEventEnabled:function(a,e){if(e&&a){var t=s.lookupEvent(a.toLowerCase());if(t)return s.eventsList(e).indexOf(t.name)>-1}return!1},eventsList:function(a){if(a){if(!o.eventsList||0==o.eventsList.length){var e=N({data:a,param:t});e&&(o.eventsList=e.split(","))}return o.eventsList}},clearCache:function(){o.delimiter="",o.eventsList=[]},lookupEvent:function(a){return a?i[a.toLowerCase()]:null},parseEventData:function(a){var e="";if(a){var t=s.lookupEvent(a.event);if(t){var r=[t.abbrv,a.timestamp,a.curPos];void 0!==a.prevPos&&null!==a.prevPos&&a.curPos!=a.prevPos&&r.push(a.prevPos),void 0!==a.p1&&null!==a.p1&&r.push(a.p1),e=r.join(n)}}return e},handleEvent:function(a,e){a&&e&&s.isEventEnabled(e.event,a)&&s.append(a,e)},setNextTick:function(a,e,t){var r=s.get(a,t);if(r&&r.indexOf("{{nextTick}}")>-1)if(e&&e.event===ja.events.playhead)a=s.set(a,r.replace(/{{nextTick}}/gi,1==e.curPos?"0":e.curPos),t);else{var n=Ba.state.position.current(a,t)||"0";a=s.set(a,r.replace(/{{nextTick}}/gi,n),t)}return a},preProcess:function(a,e){try{a&&e&&e.event&&e.event!==ja.events.play&&e.event.indexOf("event_")===-1&&(s.setNextTick(a,e),e.event===ja.events.stop&&"content"!==Ba.type.current(a)&&s.setNextTick(a,e,"content"),s.handleEvent(a,e))}catch(a){}},postProcess:function(a,e){try{a&&e&&e.event&&e.event===ja.events.play&&s.handleEvent(a,e)}catch(a){}}};return{get:s.get,set:s.set,clone:s.clone,bind:s.bind,clear:s.clear,append:s.append,isEnabled:s.isEnabled,isEventEnabled:s.isEventEnabled,preProcess:s.preProcess,postProcess:s.postProcess,setNextTick:s.setNextTick}}(),Ba={_keys:{currentPosition:"nolPriv_currPos",currentTimestamp:"nolPriv_now",stateCurrentPosition:"nolPriv_stateCurrentPH",stateCurrentTimestamp:"nolPriv_stateCurrentTS",stateCurrentStatus:"nolPriv_stateCurrentStatus",stateCurrentAsset:"nolPriv_stateCurrentAsset",stateCurrentType:"nolPriv_stateCurrentType",statePreviousPosition:"nolPriv_statePreviousPH",statePreviousTimestamp:"nolPriv_statePreviousTS",statePreviousStatus:"nolPriv_statePreviousStatus",statePreviousAsset:"nolPriv_statePreviousAsset",statePreviousType:"nolPriv_statePreviousType",tagName:"nol_comment",localTimer:"nol_timer",playerId:"nol_playerId"},states:{loaded:"LOADED",playing:"PLAYING",paused:"PAUSED",stopped:"STOPPED"},findPlayer:function(e){if(e){if("string"==typeof e)return a._players[e];var t=N({data:e,param:"nol_playerId"});return Ba.findPlayer(t)}return null},getTime:function(a){try{if(a&&!a.hasOwnProperty("type")){var e=N({data:a,param:Ba._keys.playerId});return va[e].nolPriv_baseSvrTime.getTime()}return a&&a.hasOwnProperty("type")&&"override"===a.type&&a.hasOwnProperty("baseSvrTime")?a.baseSvrTime.getTime():(new Date).getTime()}catch(a){}},currentPosition:function(a){return o(N({data:a,param:Ba._keys.currentPosition}),"num")},currentTimestamp:function(a){return o(N({data:a,param:Ba._keys.currentTimestamp}),"num")},asset:{current:function(a){return a?a._currAssetid:null},parse:function(a){var e=ka.nol_assetid?ka.nol_assetid.clientField:"nol_assetid";return a?a[e]:null}},type:{isCurrentlyContent:function(a){return"content"===a._currVidType},isCurrentlyAd:function(a){return"ad"===a._currVidType},isCurrentlyStatic:function(a){return"static"===a._currVidType},current:function(a){return a._currVidType},parse:function(a,e){var t=ka.nol_vidtype?ka.nol_vidtype.clientField:"nol_vidtype",r=e[t]?e[t].toString().toLowerCase():"",n=","+N({data:a,param:"nol_contentType"});return r&&n.indexOf(","+r)!==-1?"content":"dcrstatic"===N({data:a,param:"nol_product"})?"static":"ad"}},tagName:function(a,e){return N({data:a,param:Ba._keys.tagName,vidType:e||a._currVidType})},localTimer:function(a,e){return N({data:a,param:Ba._keys.localTimer,vidType:e||a._currVidType})||"nol_fdoffset"},isInitialized:function(a,e){try{return e=e||a._currVidType,"{}"!==JSON.stringify(a._dataArrObj[e])}catch(a){return!1}},updateMetadata:function(e,t,r){try{var n={nolParams:["nol_assetid","nol_assetName","nol_title","nol_vcTitle","nol_category","nol_channelName","nol_clientid","nol_vcid","nol_vidtype"]},o=function(a){var e=!0;for(var t in n.nolParams)if(r&&r.hasOwnProperty(n.nolParams[t])&&a===r[n.nolParams[t]].clientField){e=!1;break}return e};if(!e||!t)return;var i="undefined"!=typeof r&&"object"==typeof r&&r;for(var s in t)t.hasOwnProperty(s)&&(i&&o(s)?N({data:e,param:String(s),val:String(t[s])}):a._listeners.fireEvent("warn",{type:"warn",msg:"Attempt to update metadata field "+s+" is not allowed. Please remove "+s+" from your metadata parameter."}))}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Failed to update metadata"})}},state:{position:{current:function(a,e){return o(N({data:a,param:Ba._keys.stateCurrentPosition,vidType:e||a._currVidType}),"num")},previous:function(a,e){return o(N({data:a,param:Ba._keys.statePreviousPosition,vidType:e||a._currVidType}),"num")},set:function(a,e,t){var r=Ba.state.position.current(a);N({data:a,param:Ba._keys.statePreviousPosition,val:r,vidType:t||a._currVidType}),N({data:a,param:Ba._keys.stateCurrentPosition,val:e,vidType:t||a._currVidType})}},timeStamp:{current:function(a,e){return o(N({data:a,param:Ba._keys.stateCurrentTimestamp,vidType:e||a._currVidType}),"num")},previous:function(a,e){return o(N({data:a,param:Ba._keys.statePreviousTimestamp,vidType:e||a._currVidType}),"num")},set:function(a,e,t){var r=Ba.state.timeStamp.current(a);N({data:a,param:Ba._keys.statePreviousTimestamp,val:r,vidType:t||a._currVidType}),N({data:a,param:Ba._keys.stateCurrentTimestamp,val:e,vidType:t||a._currVidType})}},asset:{current:function(a,e){return N({data:a,param:Ba._keys.stateCurrentAsset,vidType:e||a._currVidType})},previous:function(a,e){return N({data:a,param:Ba._keys.statePreviousAsset,vidType:e||a._currVidType})},set:function(a,e,t){var r=Ba.state.asset.current(a);N({data:a,param:Ba._keys.statePreviousAsset,val:r,vidType:t||a._currVidType}),N({data:a,param:Ba._keys.stateCurrentAsset,val:e,vidType:t||a._currVidType})}},status:{current:function(a,e){return N({data:a,param:Ba._keys.stateCurrentStatus,vidType:e||a._currVidType})},previous:function(a,e){return N({data:a,param:Ba._keys.statePreviousStatus,vidType:e||a._currVidType})},set:function(a,e,t){var r=Ba.state.status.current(a,t);N({data:a,param:Ba._keys.statePreviousStatus,val:r,vidType:t||a._currVidType}),N({data:a,param:Ba._keys.stateCurrentStatus,val:e,vidType:t||a._currVidType})}},type:{current:function(a,e){return N({data:a,param:Ba._keys.stateCurrentType,vidType:e||a._currVidType})},previous:function(a,e){return N({data:a,param:Ba._keys.statePreviousType,vidType:e||a._currVidType})},set:function(a,e,t){var r=Ba.state.type.current(a,t);N({data:a,param:Ba._keys.statePreviousType,val:r,vidType:t||a._currVidType}),N({data:a,param:Ba._keys.stateCurrentType,val:e,vidType:t||a._currVidType})}},set:function(a,e){var t=Ba.findPlayer(a);switch(e.event){case"LOAD":Ba.state.asset.set(a,e.assetId),Ba.state.type.set(a,e.contentType),Ba.state.timeStamp.set(a,e.timestamp);break;case"PLAY":case"RESUME":Ba.state.status.set(a,Ba.states.playing),Ba.state.asset.set(a,e.assetId),Ba.state.type.set(a,e.contentType),Ba.state.timeStamp.set(a,e.timestamp),"PLAY"===e.event&&Ba.state.position.set(a,0),"RESUME"===e.event&&void 0!=e.currentPos&&null!=e.currentPos&&"{{nextTick}}"!=e.currentPos&&(Ba.state.position.set(a,e.curPos),Ba.state.timeStamp.set(a,e.timestamp)),t.pauseObj.eventPauseTime=0;break;case"PAUSE":Ba.state.status.set(a,Ba.states.paused);break;case"STOP":Ba.state.resetAsset(a),Ba.state.status.set(a,Ba.states.stopped);break;case"PLAYHEAD":Ba.state.position.set(a,e.curPos),Ba.state.timeStamp.set(a,e.timestamp),t.pauseObj.eventPauseTime=0;break;case"REWIND":case"FORWARD":Ba.state.position.set(a,e.curPos),Ba.state.timeStamp.set(a,e.timestamp),t.pauseObj.eventPauseTime=0;break;case"MUTE":break;case"event_play":t.pauseObj.eventPauseTime=0}},get:function(a,e){try{if(a){var t={position:{current:Ba.state.position.current(a,e),previous:Ba.state.position.previous(a,e)},timeStamp:{current:Ba.state.timeStamp.current(a,e),previous:Ba.state.timeStamp.previous(a,e)},asset:{current:Ba.state.asset.current(a,e),previous:Ba.state.asset.previous(a,e)},status:{current:Ba.state.status.current(a,e),previous:Ba.state.status.previous(a,e)},type:{current:Ba.state.type.current(a,e),previous:Ba.state.type.previous(a,e)}};return t}}catch(a){}return null},resetAsset:function(a){Ba.state.position.set(a,null),Ba.state.timeStamp.set(a,null),Ba.state.asset.set(a,null)},bind:function(a,e){try{if(a&&e)for(var t in e)N({data:a,param:Ba._keys.statePreviousPosition,val:e[t].position?e[t].position.previous:null,vidType:t}),N({data:a,param:Ba._keys.stateCurrentPosition,val:e[t].position?e[t].position.current:null,vidType:t}),N({data:a,param:Ba._keys.statePreviousTimestamp,val:e[t].timeStamp?e[t].timeStamp.current:null,vidType:t}),N({data:a,param:Ba._keys.stateCurrentTimestamp,val:e[t].timeStamp?e[t].timeStamp.current:null,vidType:t}),N({data:a,param:Ba._keys.statePreviousAsset,val:e[t].asset?e[t].asset.current:null,vidType:t}),N({data:a,param:Ba._keys.stateCurrentAsset,val:e[t].asset?e[t].asset.current:null,vidType:t}),N({data:a,param:Ba._keys.statePreviousStatus,val:e[t].status?e[t].status.current:null,vidType:t}),N({data:a,param:Ba._keys.stateCurrentStatus,val:e[t].status?e[t].status.current:null,vidType:t}),N({data:a,param:Ba._keys.statePreviousType,val:e[t].type?e[t].type.current:null,vidType:t}),N({data:a,param:Ba._keys.stateCurrentType,val:e[t].type?e[t].type.current:null,vidType:t})}catch(a){}},clone:function(a){try{return{content:Ba.state.get(a,"content"),ad:Ba.state.get(a,"ad")}}catch(a){}}}},ja=function(){var e={load:"LOAD",play:"PLAY",pause:"PAUSE",stop:"STOP",resume:"RESUME",rewind:"REWIND",forward:"FORWARD",playhead:"PLAYHEAD",mute:"MUTE",unmute:"UNMUTE"},t={checkRewind:function(a,e){if(a&&void 0!==e&&null!==e&&"stream"!==N({data:a,param:"nol_cadence"})&&"impression"!==N({data:a,param:"nol_cadence"})){var t=Math.floor(o(e,"num")),r=Ba.state.position.current(a),n=t-r;return{match:n<0,currentPos:t,previousPos:r}}return!1},checkForward:function(a,e){if(a&&void 0!==e&&null!==e&&"stream"!==N({data:a,param:"nol_cadence"})&&"impression"!==N({data:a,param:"nol_cadence"})){var t=Math.floor(o(e,"num")),r=Ba.state.position.current(a),n=Ba.state.timeStamp.current(a),i=o(N({data:a,param:"nol_cmsIntrvlGp"}),"num")||2,s=Math.ceil((Ra(a)-n)/1e3)||1;if(0==r&&t>86400&&"nol_cmsoffset"===Ba.localTimer(a)){var l=Ra(a).toString().substr(0,e.toString().length);l&&(r=parseInt(l))}var d=t-r;return{match:d>i&&d>Math.ceil(1.5*s),currentPos:t,previousPos:r}}return!1}},r={checkRewind:function(a,e){var t=Ba.currentPosition(a),r=Ba.currentTimestamp(a),n=o(N({data:a,param:"nol_id3IntrvlGp"}),"num");return!1},checkForward:function(a,e){var t=Ba.currentPosition(a),r=Ba.currentTimestamp(a),n=o(N({data:a,param:"nol_id3IntrvlGp"}),"num");return!1}},n={inferEvent:function(r,n,i,s,l){var d=null;try{if(d={event:"event_"+r,curPos:Ba.state.position.current(n),prevPos:null,timestamp:s},r&&n)switch(r.toLowerCase()){case"3":case"15":case"loadmetadata":case"pauseloadmeta":var p=Ba.asset.parse(l),c=Ba.state.asset.current(n),m=Ba.state.asset.previous(n),u=Ba.state.type.current(n),_=Ba.type.parse(n,l);if(d.event=e.load,d.assetId=p,d.contentType=_,Ba.state.status.current(n,_)==Ba.states.paused&&(c==p&&null!==p||u!==_)){d.event=e.resume,d.assetId=p,d.contentType=_,d.curPos="{{nextTick}}";break}if(Ba.state.status.current(n,_)!==Ba.states.playing&&c!=p||Ba.state.status.current(n,_)===Ba.states.stopped&&m==p&&null!==p||null===c){d.event=e.play,d.curPos="{{nextTick}}";break}break;case"5":case"play":d.event="event_play";break;case"7":case"stop":d.event="event_stop";break;case"57":case"end":case"oncomplete":d.event=e.stop;break;case"49":case"setplayheadposition":case"playheadposition":if(i>-1){var v=t.checkRewind(n,i);if(v.match){d.event=e.rewind,d.curPos=v.currentPos,d.prevPos=v.previousPos,d.p1=d.prevPos-d.curPos;break}if(Fa.get(n).indexOf("{{nextTick}}")===-1){var f=t.checkForward(n,i);if(f.match){d.event=e.forward,d.curPos=f.currentPos,d.prevPos=f.previousPos,d.p1=d.curPos-d.prevPos;break}}if(Ba.state.status.current(n)===Ba.states.paused){d.event=e.resume,d.assetId=Ba.state.asset.current(n),d.contentType=Ba.type.current(n),d.curPos=i;break}d.event=e.playhead,d.curPos=i}break;case"55":var g=N({data:n,param:N({data:n,param:"nol_timer"})})||N({data:n,param:"nol_fdoffset"});"daypart"===N({data:n,param:"nol_cadence"})&&(g=o(g,"num"),g+="nol_pcoffset"==N({data:n,param:"nol_timer"})?o(N({data:n,param:"nol_pcTimeCode"}),"num"):o(N({data:n,param:"nol_fdTimeCode"}),"num")),d.event=e.playhead;break;case"9":case"mute":d.event=e.mute,d.p1=i}}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in eventsController. Error inferring event - "+r})}return d}};return{events:e,inferEvent:n.inferEvent}}(),Ua=function(a,e,t){var r={sendMaskedPing:function(n,o){a.lsReady()?e.contentWindow.postMessage(JSON.stringify({eventType:"maskref",data:{url:n}}),e.src):(o=o||0,o<t.maxRetry&&setTimeout(function(){r.sendMaskedPing(n,o+1)},300))}};return{sendMaskedPing:r.sendMaskedPing}}(a,da,{maxRetry:ya}),Qa=["sun","mon","tue","wed","thu","fri","sat"];return $.initFromConfig=function(e,t){a._listeners.fireEvent("info",{type:"info",msg:"Recieved config response."});try{if(e&&e.nol_GLOBALS){var r,n,i,l,d,p,c="localhost",u=e.nol_GLOBALS.debugSfcode||"uat-cert",_=e.nol_GLOBALS.nol_appid||"",v=e.nol_GLOBALS.nol_lsid||"",f=e.nol_GLOBALS.nol_emmURL||(e.nol_GLOBALS.nol_tagMap&&e.nol_GLOBALS.nol_tagMap.nol_defaults?e.nol_GLOBALS.nol_tagMap.nol_defaults.nol_emmURL:"")||"",g,y,h,T,P,S,w,b;if(a._listeners.fireEvent("debug",{type:"debug",msg:"Cached lsid: "+a.localStorageId+"; config lsid: "+v}),a._listeners.fireEvent("debug",{type:"debug",msg:"Cached emm: "+a.EMMURL+"; config emm: "+f}),""===f&&""!==v?a.setLsId(v):""!==f&&(""!==v&&a.localStorageId!==v||f!==a.EMMURL)&&(a.setLsId(v,f),a.setEmmUrl(f)),a._listeners.fireEvent("sendOptOutStatus","OPTOUT"==v),void 0!==e.nol_GLOBALS.nol_maxRetry&&null!==e.nol_GLOBALS.nol_maxRetry&&""!==e.nol_GLOBALS.nol_maxRetry){
var O=parseInt(e.nol_GLOBALS.nol_maxRetry);O>-1&&(ya=O)}if(e&&e.hasOwnProperty("nol_GLOBALS")){var C=t||e.nol_GLOBALS.nol_playerId||0;if(n=a._players[C],!n)return;c=e.nol_GLOBALS.nol_sfcode||c,a._listeners.fireEvent("debug",{type:"debug",msg:'SDK instance "'+n.name+'" initialized with globals '+JSON.stringify(n.getConfigParams().ggParams)}),n.pauseObj={pauseTime:0,eventPauseTime:0,maxPauseTime:parseInt(e.nol_GLOBALS.nol_pauseTimeout)||1800,cmsPauseTime:parseInt(e.nol_GLOBALS.nol_pauseEventTimeoutPlayhead)||15},b=a.localStorage?va[C]?va[C].nol_serverTime||a.localStorage.getItem("nol_serverTime"):a.localStorage.getItem("nol_serverTime")||0:va[C]?va[C].nol_serverTime:0,b===e.nol_GLOBALS.nol_serverTime?fa=0:(fa=0,a.localStorage&&a.localStorage.setItem("nol_serverTime",e.nol_GLOBALS.nol_serverTime)),ha=e.nol_GLOBALS.nol_errorWait||ha,r=n.getConfigParams().ggParams||{},va[C]=s(va[C]),va[C].nolPriv_serverTimeOffset=fa,va&&va.hasOwnProperty(C)?(va[C].nolPriv_baseSvrTime=e.nol_GLOBALS.hasOwnProperty("nol_serverTime")&&e.nol_GLOBALS.nol_serverTime?new Date(1e3*o(e.nol_GLOBALS.nol_serverTime,"num")):(new Date).getTime(),a._listeners.addListener("tick",function(){va[C].nolPriv_baseSvrTime.setUTCSeconds(va[C].nolPriv_baseSvrTime.getUTCSeconds()+1)})):a._listeners.fireEvent("error",{type:"error",msg:"Error in initFromConfig. Invalid data object or playerId."}),Sa&&(window.clearInterval(Sa),Sa=0),e.nol_GLOBALS.nol_sendTimer&&(Sa=window.setInterval(function(){m({baseSvrTime:Ra(fData),serverTimeOffset:va[C].nolPriv_serverTimeOffset,url:"__sendIt"})},1e3*e.nol_GLOBALS.nol_sendTimer));for(i in r)r.hasOwnProperty(i)&&(va[C][i]=r[i]);for(i in e.nol_GLOBALS)e.nol_GLOBALS.hasOwnProperty(i)&&(va[C][i]=e.nol_GLOBALS[i]);Ia=va[C].nol_eventFilter||{},Aa=va[C].nol_serviceFilter||{},Va=va[C].nol_id3Map||{};for(i in va[C].nol_clientCMSmap)va[C].nol_clientCMSmap.hasOwnProperty(i)&&(y=va[C].nol_clientCMSmap[i].toString()||"",h=y.replace(_a,""),P=y.match(_a)||[],T={clientField:h.toString(),encoding:P.join("")},ka[i]=T);e.nol_GLOBALS.hasOwnProperty("nol_maxStaticInstances")&&aa.hasOwnProperty("setTotalNumAssetsAllowed")&&aa.setTotalNumAssetsAllowed(e.nol_GLOBALS.nol_maxStaticInstances),n.configLoaded=!0,va[C].nol_lstrg="",v&&"999"!==v&&!a.userAgent.isFB()&&(va[C].nol_lstrg="lstrg-"+v)}if(e&&e.hasOwnProperty("nol_TAGS"))for(va[C].tagSize=e.nol_TAGS.length,va[C].tags=[],a._listeners.fireEvent("debug",{type:"debug",msg:"NIELSEN TAGS EXPECTED TO FIRE:"}),i=0;i<va[C].tagSize;i+=1)a._listeners.fireEvent("debug",{type:"debug",msg:String(e.nol_TAGS[i].nol_comment)}),va[C].tags.push(new X(JSON.parse(JSON.stringify(e.nol_TAGS[i])),n));if(void 0!==a.enablePlayer&&a.enablePlayer(C,"PLDPR"),va[C].bReInit=!1,r.nol_hybridCfg&&window&&window.JSON&&(g=window.document.createElement("script"),g.text="(function() {if (typeof "+r.nol_hybridCfg+" === 'function'){"+r.nol_hybridCfg+"('"+JSON.stringify(e)+"')}}())",window.document.head?(window.document.head.appendChild(g),window.document.head.removeChild(g)):(window.document.getElementsByTagName("head")[0].appendChild(g),window.document.getElementsByTagName("head")[0].removeChild(g))),va[C].forceStreamRegen=!1,va[C].forceStreamRegen=!1,a._listeners.addListener("tick",function(){n&&n.hasOwnProperty("pauseObj")&&n.pauseObj.hasOwnProperty("pauseTime")&&(n.pauseObj.pauseTime+=1,n.pauseObj.eventPauseTime+=1)}),n&&n.configLoaded&&window.NOLCMB&&window.NOLCMB.controllers&&window.NOLCMB.controllers.util&&window.NOLCMB.controllers.util.fireCustomEvent)try{window.NOLCMB.controllers.util.fireCustomEvent("NSDK_Initialized",{instanceName:n.name,instance:n})}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in initFromConfig. Exception firing NSDK_Initialized event."})}a._listeners.fireEvent("flushQueue")}else window.console&&window.console.warn&&window.console.warn("Warning: CMS config response is not valid. Please ensure NOL global parameter values are correct."),a._listeners.fireEvent("warn",{type:"warn",msg:"Warning in initFromConfig. NOL global parameters are not valid."})}catch(e){window.console&&window.console.error&&window.console.error("Error initializing CMS config response. Please ensure NOL global parameter values are correct."),a._listeners.fireEvent("error",{type:"error",msg:"Error in initFromConfig. Error parsing config response."})}},$.getCmsMap=function(e){try{if("undefined"!=typeof e&&"string"==typeof e||a._listeners.fireEvent("error",{type:"error",msg:"Error in getCmsMap. PlayerID must be passed as string data type."}),va&&va.hasOwnProperty(e)&&"undefined"!=typeof va[e].nol_clientCMSmap)return va[e].nol_clientCMSmap}catch(e){a._listeners.fireEvent("error",{type:"error",msg:"Error in getCmsMap."})}},$.init=function(e){var t=e.getConfigParams()||{},r,n,o=a.getIfLsidShouldSend()?a.getLsId():void 0,i,s="",l=0===ia.indexOf("https")?"https":"http",d=t.nol_playerId||t.playerId||0;i={pli:{val:d,protect:!0},nmspc:{val:"NOLCMB",protect:!0},sdkv:{val:ea,protect:!0},fmt:{val:"jsonp",protect:!0},apn:{val:"Tester",protect:!1},fbtag:{val:"true",protect:!1},cfgv:{val:pa,protect:!0},bldv:{val:na,protect:!0},prefprotocol:{val:l,protect:!1}},e.addListener("ggPM",function(a){x(a)}),e.lsPopulatedInterval=0,e.lsCurrentRetry=0,e.serviceSending={tsv:!1,stn:!1},e.ottStatusObj={},e.oServiceCall={},e.static={started:!1};for(r in t.ggParams)!t.ggParams.hasOwnProperty(r)||i[r]&&i[r].protect||0==r.indexOf("nol_")||(i[r]={val:p(t.ggParams[r])});for(r in i)i.hasOwnProperty(r)&&(s+=r+"="+i[r].val+"&");s=s.substr(0,s.length-1),n=ia.replace(/[\w\W]*?:\/\//g,""),void 0===o||e.lsPopulatedInterval?void 0===o&&(La=l+"://"+n+oa+sa+"?"+s+"&sendTime="+Math.floor(Ra()/1e3),Z({configReq:La,player:e})):e.lsPopulatedInterval=window.setInterval(function(){o=a.getLsId(),"-1"!==o?(La=l+"://"+n+oa+sa+"?"+s+"&lsid="+o+"&sendTime="+Math.floor(Ra()/1e3),Z({configReq:La,player:e})):e.lsCurrentRetry===wa?(La=l+"://"+n+oa+sa+"?"+s+"&lsid=999&sendTime="+Math.floor(Ra()/1e3),Z({configReq:La,player:e})):e.lsCurrentRetry+=1},1e3)},$.built||($.built=!0,$.BUILDVERSION=na,$.dataObj=va,a.bindPlayers($,"PLDPR"),a._listeners.fireEvent("flushQueue")),$});